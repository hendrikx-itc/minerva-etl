directory
=========

Stores contextual information for the data. This includes the entities, entitytypes, datasources, etc. It is the entrypoint when looking for data.

Tables
------

entitytype
``````````

Stores the entity types that exist in the entity table. Entity types are also used to give context to data that is stored for entities.

+-------------+-----------------------+-------------+
|    Name     |         Type          | Description |
+=============+=======================+=============+
| id          | integer               | None        |
+-------------+-----------------------+-------------+
| name        | character varying(50) | None        |
+-------------+-----------------------+-------------+
| description | character varying     | None        |
+-------------+-----------------------+-------------+


entity_link_denorm
``````````````````



+-----------+---------+-------------+
|   Name    |  Type   | Description |
+===========+=========+=============+
| entity_id | integer | None        |
+-----------+---------+-------------+
| tags      | text[]  | None        |
+-----------+---------+-------------+
| name      | text    | None        |
+-----------+---------+-------------+


entitytaglink
`````````````



+-----------+---------+-------------+
|   Name    |  Type   | Description |
+===========+=========+=============+
| tag_id    | integer | None        |
+-----------+---------+-------------+
| entity_id | integer | None        |
+-----------+---------+-------------+


aliastype
`````````



+------+-------------------+-------------+
| Name |       Type        | Description |
+======+===================+=============+
| id   | integer           | None        |
+------+-------------------+-------------+
| name | character varying | None        |
+------+-------------------+-------------+


alias
`````



+-----------+-------------------+-------------+
|   Name    |       Type        | Description |
+===========+===================+=============+
| entity_id | integer           | None        |
+-----------+-------------------+-------------+
| name      | character varying | None        |
+-----------+-------------------+-------------+
| type_id   | integer           | None        |
+-----------+-------------------+-------------+


tag
```

Stores all tags. A tag is a simple label that can be attached to a number of object types in the database, such as entities and trends.

+-------------+-------------------+-------------+
|    Name     |       Type        | Description |
+=============+===================+=============+
| id          | integer           | None        |
+-------------+-------------------+-------------+
| name        | character varying | None        |
+-------------+-------------------+-------------+
| taggroup_id | integer           | None        |
+-------------+-------------------+-------------+
| description | character varying | None        |
+-------------+-------------------+-------------+


taggroup
````````



+---------------+-------------------+-------------+
|     Name      |       Type        | Description |
+===============+===================+=============+
| id            | integer           | None        |
+---------------+-------------------+-------------+
| name          | character varying | None        |
+---------------+-------------------+-------------+
| complementary | boolean           | None        |
+---------------+-------------------+-------------+


existence
`````````



+---------------+--------------------------+-------------+
|     Name      |           Type           | Description |
+===============+==========================+=============+
| timestamp     | timestamp with time zone | None        |
+---------------+--------------------------+-------------+
| exists        | boolean                  | None        |
+---------------+--------------------------+-------------+
| entity_id     | integer                  | None        |
+---------------+--------------------------+-------------+
| entitytype_id | integer                  | None        |
+---------------+--------------------------+-------------+


entity
``````

Describes entities. An entity is the base object for which the database can hold further information such as attributes, trends and notifications. All data must have a reference to an entity.

+------------------+--------------------------+-------------+
|       Name       |           Type           | Description |
+==================+==========================+=============+
| id               | integer                  | None        |
+------------------+--------------------------+-------------+
| first_appearance | timestamp with time zone | None        |
+------------------+--------------------------+-------------+
| name             | character varying        | None        |
+------------------+--------------------------+-------------+
| entitytype_id    | integer                  | None        |
+------------------+--------------------------+-------------+
| dn               | character varying        | None        |
+------------------+--------------------------+-------------+
| parent_id        | integer                  | None        |
+------------------+--------------------------+-------------+


datasource
``````````

Describes datasources. A datasource is used to indicate where data came from. Datasources are also used to prevent collisions between sets of data from different sources, where names can be the same, but the meaning of the data differs.

+-------------+------------------------+-------------+
|    Name     |          Type          | Description |
+=============+========================+=============+
| id          | integer                | None        |
+-------------+------------------------+-------------+
| name        | character varying(100) | None        |
+-------------+------------------------+-------------+
| description | character varying      | None        |
+-------------+------------------------+-------------+
| timezone    | character varying(40)  | None        |
+-------------+------------------------+-------------+

Functions
---------
+------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------+-------------+
|                                                 Name                                                 |                                          Return Type                                          | Description |
+======================================================================================================+===============================================================================================+=============+
| addentity(timestamp with time zone, character varying, integer, character varying, integer)          | integer                                                                                       |             |
+------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------+-------------+
| array_to_dn_part(character varying[])                                                                | directory.dn_part                                                                             |             |
+------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------+-------------+
| compile_minerva_query(query directory.query_part[])                                                  | text                                                                                          |             |
+------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------+-------------+
| compile_minerva_query(query text)                                                                    | text                                                                                          |             |
+------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------+-------------+
| create alias for new entity (func)()                                                                 | trigger                                                                                       |             |
+------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------+-------------+
| create entitytaglink for new entity (func)()                                                         | trigger                                                                                       |             |
+------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------+-------------+
| create tag for new entitytypes (func)()                                                              | trigger                                                                                       |             |
+------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------+-------------+
| create_datasource(character varying)                                                                 | directory.datasource                                                                          |             |
+------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------+-------------+
| create_entity(character varying)                                                                     | directory.entity                                                                              |             |
+------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------+-------------+
| create_entitytype(character varying)                                                                 | directory.entitytype                                                                          |             |
+------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------+-------------+
| dn_part_to_string(directory.dn_part)                                                                 | character varying                                                                             |             |
+------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------+-------------+
| dn_to_entity(character varying)                                                                      | directory.entity                                                                              |             |
+------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------+-------------+
| dns_to_entity_ids(character varying[])                                                               | SETOF integer                                                                                 |             |
+------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------+-------------+
| entities_by_type(character varying)                                                                  | SETOF directory.entity                                                                        |             |
+------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------+-------------+
| entities_by_type(integer)                                                                            | SETOF directory.entity                                                                        |             |
+------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------+-------------+
| entity_id(directory.entity)                                                                          | integer                                                                                       |             |
+------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------+-------------+
| entitytype_id(directory.entitytype)                                                                  | integer                                                                                       |             |
+------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------+-------------+
| explode_dn(character varying)                                                                        | directory.dn_part[]                                                                           |             |
+------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------+-------------+
| get_alias(entity_id integer, aliastype_name character varying)                                       | character varying                                                                             |             |
+------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------+-------------+
| get_datasource(character varying)                                                                    | directory.datasource                                                                          |             |
+------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------+-------------+
| get_entity(character varying)                                                                        | directory.entity                                                                              |             |
+------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------+-------------+
| get_entitytype(character varying)                                                                    | directory.entitytype                                                                          |             |
+------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------+-------------+
| get_entitytype_id(character varying)                                                                 | integer                                                                                       |             |
+------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------+-------------+
| get_existence(timestamp with time zone, integer)                                                     | boolean                                                                                       |             |
+------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------+-------------+
| getentitybydn(character varying)                                                                     | TABLE(id integer, entitytype_id integer, name character varying, parent_id integer)           |             |
+------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------+-------------+
| getentitybyid(integer)                                                                               | TABLE(dn character varying, entitytype_id integer, name character varying, parent_id integer) |             |
+------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------+-------------+
| glue_dn(directory.dn_part[])                                                                         | character varying                                                                             |             |
+------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------+-------------+
| last_dn_part(directory.dn_part[])                                                                    | directory.dn_part                                                                             |             |
+------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------+-------------+
| make_c_join(index integer, entity_id_table text, entity_id_column text, tag_index integer, tag text) | text                                                                                          |             |
+------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------+-------------+
| make_s_join(index integer, entity_id_table text, entity_id_column text, alias text)                  | text                                                                                          |             |
+------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------+-------------+
| name_to_datasource(character varying)                                                                | directory.datasource                                                                          |             |
+------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------+-------------+
| name_to_entitytype(character varying)                                                                | directory.entitytype                                                                          |             |
+------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------+-------------+
| parent_dn(character varying)                                                                         | character varying                                                                             |             |
+------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------+-------------+
| parent_dn_parts(directory.dn_part[])                                                                 | directory.dn_part[]                                                                           |             |
+------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------+-------------+
| run_minerva_query(query directory.query_part[])                                                      | TABLE(id integer, dn character varying, entitytype_id integer)                                |             |
+------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------+-------------+
| split_raw_part(character varying)                                                                    | directory.dn_part                                                                             |             |
+------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------+-------------+
| sumproduct(query directory.query_part[], value_trend text, weight_trend text)                        | TABLE("timestamp" timestamp with time zone, wavg double precision)                            |             |
+------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------+-------------+
| tag_entity(dn character varying, tag character varying)                                              | character varying                                                                             |             |
+------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------+-------------+
| tag_entity(entity_id integer, tag character varying)                                                 | integer                                                                                       |             |
+------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------+-------------+
| update_denormalized_entity_tags(entity_id integer)                                                   | directory.entity_link_denorm                                                                  |             |
+------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------+-------------+
| update_entity_link_denorm_for_delete()                                                               | trigger                                                                                       |             |
+------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------+-------------+
| update_entity_link_denorm_for_insert()                                                               | trigger                                                                                       |             |
+------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------+-------------+
| wavg(query directory.query_part[], value_trend_id integer, weight_trend_id integer)                  | TABLE("timestamp" timestamp with time zone, wavg double precision)                            |             |
+------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------+-------------+
